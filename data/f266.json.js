window.repositoryObject = {"parameters_custom_fields":[],"object_id":"f266","name":"public.pos_phone_format_reverse","subtype":"FUNCTION","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"Hasura","id":"d4"}},{"field":"Schema","value":"public"},{"field":"Name","value":"pos_phone_format_reverse"},{"field":"Type","value":"Function"}],"script":"CREATE OR REPLACE FUNCTION public.pos_phone_format_reverse(text)\r\n RETURNS text\r\n LANGUAGE plpgsql\r\nAS $function$  \r\nDECLARE\r\n  phone ALIAS FOR $1;\r\n  new_phone text;\r\nbegin  \r\n  /* для России 7->8 */\r\n  IF CHAR_LENGTH(phone) = 11 THEN\r\n    new_phone := '8'::text || substring(phone FROM 2 FOR 11);\r\n  /* для Украины сокращенный 050 */\r\n  ELSIF CHAR_LENGTH(phone) = 12 THEN\r\n    new_phone := substring(phone FROM 3);\r\n  ELSE\r\n    new_phone := phone;\r\n  END IF; \r\n\r\n  return new_phone;\r\nend  \r\n$function$","parameters":[{"name":"Returns","description":null,"mode":"OUT","data_type":"text","custom_fields":{}},{"name":"$1","description":null,"mode":"IN","data_type":"text","custom_fields":{}}],"dependencies":null,"imported_at":"2023-11-29 12:21"};