window.repositoryObject = {"parameters_custom_fields":[],"object_id":"f156","name":"public.after_issue_insert_set_order_issue_id","subtype":"FUNCTION","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"Hasura","id":"d4"}},{"field":"Schema","value":"public"},{"field":"Name","value":"after_issue_insert_set_order_issue_id"},{"field":"Type","value":"Function"}],"script":"CREATE OR REPLACE FUNCTION public.after_issue_insert_set_order_issue_id()\r\n RETURNS trigger\r\n LANGUAGE plpgsql\r\nAS $function$  \r\nbegin  \r\n  /* проставляем issue_id для заказов из Atlas если они первее синхронизировались  */\r\n  UPDATE \"order\".\"order\"\r\n  SET issue_id = new.id\r\n  WHERE \"order\".\"issue_origin\" = new.origin \r\n    AND \"order\".\"issue_id\" IS NULL;\r\n  \r\n  RETURN new;\r\nend  \r\n$function$","parameters":[{"name":"Returns","description":null,"mode":"OUT","data_type":"trigger","custom_fields":{}}],"dependencies":null,"imported_at":"2023-11-29 12:21"};