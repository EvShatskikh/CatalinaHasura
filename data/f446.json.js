window.repositoryObject = {"parameters_custom_fields":[],"object_id":"f446","name":"atlas.sync_atlas_check_sync_status","subtype":"FUNCTION","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"Hasura","id":"d4"}},{"field":"Schema","value":"atlas"},{"field":"Name","value":"sync_atlas_check_sync_status"},{"field":"Type","value":"Function"}],"script":"CREATE OR REPLACE FUNCTION atlas.sync_atlas_check_sync_status()\r\n RETURNS trigger\r\n LANGUAGE plpgsql\r\nAS $function$\r\nDECLARE\r\nBEGIN\r\n  -- 'отклоняем изменения, если синхронизировано в SWE'\r\n  IF (OLD.sync_status = 'synced' OR OLD.sync_status = 'sync') \r\n    AND NEW.updated_by <> 'swe'\r\n  THEN\r\n    RETURN OLD;\r\n  ELSE\r\n    RETURN NEW;\r\n  END IF;\r\nEND;\r\n$function$","parameters":[{"name":"Returns","description":null,"mode":"OUT","data_type":"trigger","custom_fields":{}}],"dependencies":{"uses":[],"used_by":[]},"imported_at":"2024-02-15 12:25"};