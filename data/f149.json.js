window.repositoryObject = {"parameters_custom_fields":[],"object_id":"f149","name":"pl.promo_deleted_for_atlas","subtype":"FUNCTION","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"Hasura","id":"d4"}},{"field":"Schema","value":"pl"},{"field":"Name","value":"promo_deleted_for_atlas"},{"field":"Type","value":"Function"}],"script":"CREATE OR REPLACE FUNCTION pl.promo_deleted_for_atlas(promo_row pl.promo)\r\n RETURNS boolean\r\n LANGUAGE sql\r\n STABLE\r\nAS $function$\r\n  SELECT CASE \r\n    WHEN promo_row.deleted = false \r\n        AND '\"atlas\"' = ANY (ARRAY(SELECT * FROM jsonb_array_elements(promo_row.apply_to))::text[])\r\n    THEN false ELSE true END AS deleted_for_atlas\r\n$function$","parameters":[{"name":"Returns","description":null,"mode":"OUT","data_type":"boolean","custom_fields":{}},{"name":"promo_row","description":null,"mode":"IN","data_type":"promo","custom_fields":{}}],"dependencies":{"uses":[],"used_by":[]},"imported_at":"2024-02-15 12:25"};